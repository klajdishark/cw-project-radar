extends ../structure/_base

mixin action(actionClass, label, route, imageStr)
    a(route=route, class=actionClass, style="cursor: pointer")
        img(width=16, alt=label, src=imageStr)

mixin userActions(user)
    tr
        td #{user.name}
        td #{user.email}
        td #{user.role}
        td
            +action('edit-user', `Edit ${user.name}`, `/admin/user/edit/${user._id}`, 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ItCh0LvQvtC5XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTAwMHB4IiBoZWlnaHQ9IjEwMDBweCIgdmlld0JveD0iMCAwIDEwMDAgMTAwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwMCAxMDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik05NjguMTYxLDMxLjgzOWMzNi40NTYsMzYuNDU2LDM2LjM5Niw5NS41NDcsMCwxMzIuMDAzbC00My45OTEsNDMuOTkxTDc5Mi4xMzgsNzUuODNsNDMuOTkxLTQzLjk5MQ0KCUM4NzIuNTgzLTQuNTg2LDkzMS43MDQtNC42MTcsOTY4LjE2MSwzMS44Mzl6IE0zMDguMjM4LDU1OS43OWwtNDMuOTYsMTc1Ljk2M2wxNzUuOTYzLTQzLjk5MWw0MzkuOTM4LTQzOS45MzhMNzQ4LjE0NywxMTkuODIxDQoJTDMwOC4yMzgsNTU5Ljc5eiBNNzQ2LjYyNyw0NzMuMzg3djQwMi4xNzVIMTI0LjQzOFYyNTMuMzczaDQwMi4yMDRsMTI0LjQwNy0xMjQuNDM4SDBWMTAwMGg4NzEuMDY0VjM0OC45MThMNzQ2LjYyNyw0NzMuMzg3eiIvPg0KPC9zdmc+DQo=')
            +action('delete-user', `Delete ${user.name}`, `/api/v1/user/${user._id}`, 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTI4MC4wMDAwMDBwdCIgaGVpZ2h0PSIxMjgwLjAwMDAwMHB0IiB2aWV3Qm94PSIwIDAgMTI4MC4wMDAwMDAgMTI4MC4wMDAwMDAiCiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMTI4MC4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMCkiCmZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSI+CjxwYXRoIGQ9Ik0xMzQ4IDExNDUyIGwtOTQzIC05NDIgMjA0OCAtMjA0OCBjMTEyNiAtMTEyNiAyMDQ3IC0yMDU0IDIwNDcKLTIwNjIgMCAtOCAtOTIxIC05MzYgLTIwNDcgLTIwNjIgbC0yMDQ4IC0yMDQ4IDk0MyAtOTQyIDk0MiAtOTQzIDIwNDggMjA0OApjMTEyNiAxMTI2IDIwNTQgMjA0NyAyMDYyIDIwNDcgOCAwIDkzNiAtOTIxIDIwNjIgLTIwNDcgbDIwNDggLTIwNDggOTQyIDk0Mwo5NDMgOTQyIC0yMDQ4IDIwNDggYy0xMTI2IDExMjYgLTIwNDcgMjA1NCAtMjA0NyAyMDYyIDAgOCA5MjEgOTM2IDIwNDcgMjA2MgpsMjA0OCAyMDQ4IC05NDMgOTQyIC05NDIgOTQzIC0yMDQ4IC0yMDQ4IGMtMTEyNiAtMTEyNiAtMjA1NCAtMjA0NyAtMjA2MgotMjA0NyAtOCAwIC05MzYgOTIxIC0yMDYyIDIwNDcgbC0yMDQ4IDIwNDggLTk0MiAtOTQzeiIvPgo8L2c+Cjwvc3ZnPgo=')


block content
    h2 Manage users
    table
        thead
            tr
                td Name
                td Email
                td Role
                td Actions
        each u in users
            +userActions(u)
    h2 Add new user
    .login-form
        form.form.form--new-user#new-user-form
            .form__group
                label.form__label(for='name') Username
                input#name.form__input(type='string', placeholder='username', required)
            .form__group.ma-bt-md
                label.form__label(for='email') Email address
                input#email.form__input(type='string', placeholder='••••••••', required)
            .form__group.ma-bt-md
                label.form__label(for='password') Password
                input#password.form__input(type='password', placeholder='••••••••', required, minlength='8')
            .form__group.ma-bt-md
                label.form__label(for='password') Password confirmation
                input#confirm.form__input(type='password', placeholder='••••••••', required, minlength='8')
            .form__group
                label.form__label(for="role") Role
                select#role(name="role")
                    option(value="admin") Admin
                    option(value="cw-hub") CW Hub
                    option(value="project" selected) Project
            .form__group
                button.btn#btn--create-user Create user